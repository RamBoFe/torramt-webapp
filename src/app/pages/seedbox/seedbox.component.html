<div class="container mt-5">
  <h1 class="text-center">Torrents de la Seedbox</h1>

  <div class="row mt-5">
    <div class="col-6">
      Torrents : {{ totalTorrents }}
    </div>
    <div class="col-6 text-right">
      Taille totale ftp : {{ totalSize| fileSize }}
    </div>
  </div>

  <ul class="list-group list-group-flush">
    <li
      *ngFor="let torrent of torrents"
      class="list-group-item"
    >
      <div class="row">
        <div class="col-2 align-icons">
          <a (click)="togglePlayPause(torrent.status, torrent.hashString)">
            <mdb-badge
              pill="true"
              color="teal"
            >
              <mdb-icon fas
               size="2x"
               [icon]="torrent.status ? 'pause' : 'play'"
              >
              </mdb-icon>
            </mdb-badge>
          </a>
          <a (click)="openModalConfirmDel(torrent.hashString, torrent.name)">
            <mdb-badge
              pill="true"
              danger="true"
            >
              <mdb-icon fas
                icon="trash-alt"
              >
              </mdb-icon>
            </mdb-badge>
          </a>
        </div>
        <div class="col-10 small">
          <h6>{{ torrent.name }}</h6>
          <div class="row">
            <div class="col-7">
              <ng-template
                [ngIf]="torrent.percentDone === 1 && torrent.status !== 4"
                [ngIfElse]="downloadedInfos"
              >
                {{ torrent.totalSize | fileSize }}
              </ng-template>
              <ng-template #downloadedInfos>
                {{ torrent.downloadedEver | fileSize }} sur {{ torrent.totalSize | fileSize }}
              </ng-template>
            </div>
            <div class="col-5 text-right">
              {{ torrent.rateDownload |fileSize }}/s
              <mdb-icon fas icon="arrow-down" class="text-success"></mdb-icon>
            </div>
          </div>
          <div class="row">
            <div class="col-7">
              {{ torrent.uploadedEver | fileSize }} (Ratio: {{ torrent.uploadRatio | number: '1.0-2' }})
            </div>
            <div class="col-5 text-right">
              {{ torrent.rateUpload |fileSize }}/s
              <mdb-icon fas icon="arrow-up" class="text-danger"></mdb-icon>
            </div>
          </div>
          <div class="progress custom-progress">
            <div
              class="progress-bar"
              [ngClass]="{
                'bg-success': torrent.status === 6,
                'bg-info': torrent.status === 4,
                'bg-light': torrent.status === 0
              }"
              role="progressbar"
              [style.width.%]="torrent.percentDone | percent"
            ></div>
          </div>

          <div
            *ngIf="torrent.percentDone < 1
            && (torrent.status === 4 || torrent.status === 0)"
            class="row"
          >
            <div class="col-3">
              {{ torrent.percentDone | percent }} %
            </div>
            <div class="col-9 text-right">
              {{ torrent.downloadedEver | downloadTime: torrent.rateDownload  }}
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div>
